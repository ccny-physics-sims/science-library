function touchStarted(){return ellipse(mouseX,mouseY,5,5),somethingIsDragging=!0,!1}function touchMoved(){return ellipse(mouseX,mouseY,5,5),somethingIsDragging=!0,!1}function touchEnded(){return ellipse(mouseX,mouseY,5,5),somethingIsDragging=!1,!1}function Arrow(origin,target,options){var options=options||{};this.origin=origin.copy(),this.target=target.copy(),this.grab=!0,this.draggable=!0,this.showComponents=!1,this.color=void 0!==options.color?options.color:color("rgb(255,255,255)"),this.selected=!1,this.dragSelected=!1,this.isDragging=!1,this.width=void 0!==options.width?options.width:20,this.oldX=0,this.oldY=0,this.display=function(){push(),fill(this.color),noStroke();var d=dist(this.origin.x,this.origin.y,this.target.x,this.target.y),w=this.width;translate(this.origin.x,this.origin.y);var angle=angCalc(this);rotate(angle),this.boundChk()&&1==this.draggable&&fill(red(this.color)+(255-red(this.color))/2,green(this.color)+(255-green(this.color))/2,blue(this.color)+(255-blue(this.color))/2),1==this.isDragging&&fill(red(this.color)+(255-red(this.color))/2,green(this.color)+(255-green(this.color))/2,blue(this.color)+(255-blue(this.color))/2),drawArrow(w,d,this),pop(),!0===this.showComponents&&(push(),strokeWeight(2),stroke(this.color),textSize(18),line(this.origin.x,this.origin.y,this.target.x,this.origin.y),line(this.origin.x,this.origin.y,this.origin.x,this.target.y),pop(),push(),fill(0),text("y: "+Math.round(-1*(this.target.y-this.origin.y)).toString(),this.origin.x,this.target.y),text("x: "+Math.round(this.target.x-this.origin.x).toString(),this.target.x,this.origin.y),pop())},this.update=function(){somethingIsDragging&&(this.selected=!0),this.selected?(this.target.x=mouseX,this.target.y=mouseY):this.dragSelected&&(this.oldX!==mouseX&&0!==this.oldX&&(this.target.x+=mouseX-this.oldX,this.origin.x+=mouseX-this.oldX),this.oldY!==mouseY&&0!==this.oldY&&(this.target.y+=mouseY-this.oldY,this.origin.y+=mouseY-this.oldY),this.oldX=mouseX,this.oldY=mouseY)},this.boundChk=function(){var d1=dist(mouseX,mouseY,this.origin.x,this.origin.y),d2=dist(mouseX,mouseY,this.target.x-2,this.target.y-2),lineLen=dist(this.origin.x,this.origin.y,this.target.x-2,this.target.y-2);return buffer=2,void 0===buffer&&(buffer=1),d1+d2>=lineLen-buffer&&d1+d2<=lineLen+buffer}}function drawArrow(thickness,length,arrow){if(translate(0,-thickness/2),rect(0,thickness/4,length-8,thickness/2),triangle(length-8,0,length-8,thickness,length+thickness/2,thickness/2),!0===arrow.grab){dist(arrow.target.x,arrow.target.y,mouseX,mouseY)<6?(fill(40,40),strokeWeight(1),stroke("black"),ellipse(length,thickness/2,1.5*arrow.width,1.5*arrow.width),mouseIsPressed?(arrow.selected=!0,fill(255,255,0,150),arrow.isDragging=!0):(arrow.selected=!1,arrow.isDragging=!1,fill(255,255,255,200))):noFill(),!0===arrow.draggable&&(arrow.boundChk()?mouseIsPressed?(arrow.dragSelected=!0,arrow.isDragging=!0,somethingIsDragging=!0,arrow.isDragging?(arrow.oldX=mouseX,arrow.oldY=mouseY,fill(255,255,0,100)):somethingIsDragging&&(arrow.oldX=arrow.oldX,arrow.oldY=arrow.oldY)):(arrow.dragSelected=!1,arrow.isDragging=!1,somethingIsDragging=!1,fill(255,255,255,100),this.oldX=0,this.oldY=0):noFill(),arrow.selected&&arrow.dragSelected&&(arrow.dragSelected=!1))}}function angCalc(arrow){return atan2(arrow.target.y-arrow.origin.y,arrow.target.x-arrow.origin.x)}function Spring(position,k,m,lengthOfSpring,oscAmp,mu){boxsize=70,this.noOfCoils=11,this.lengthOfSpring=lengthOfSpring,this.transAmp=15,this.tzero=millis(),this.time=0,this.play=!0,this.xcent=position.x,this.ycent=position.y,this.rotation=0,this.oscAmp=oscAmp_,this.freq=sqrt(k/m-sq(mu_)/(4*sq(m))),this.mu=mu,this.m=m,this.k=k,this.equilibrium=createVector(this.lengthOfSpring,0),this.displacement=createVector(0,0),this.velocity=createVector(0,0),this.acceleration=createVector(0,0),this.setPlay=function(play){this.play=play},this.update=function(){this.play?this.time=millis()/1e3-this.tzero:this.tzero=millis()/1e3-this.time},this.display=function(){push();var theta=this.time*this.freq,amp=this.oscAmp*exp(-1*this.mu*this.time/(2*this.m));translate(this.xcent,this.ycent),rotate(this.rotation),fill(200),rect(this.lengthOfSpring-boxsize/2+(this.lengthOfSpring-60)*amp*sin(theta),-boxsize/2,boxsize,boxsize),noFill(),stroke(80),strokeWeight(3),beginShape(),curveVertex(-1,0),curveVertex(0,0),curveVertex(5,0),curveVertex(20,0),curveVertex(25,0);for(var i=0;i<this.lengthOfSpring-60;i++)curveVertex(30+i*(1+amp*sin(theta)),-this.transAmp*sin(2*PI*this.noOfCoils*i/this.lengthOfSpring));curveVertex(30+i*(1+amp*sin(theta))+5,0),curveVertex(30+i*(1+amp*sin(theta))+20,0),curveVertex(30+i*(1+amp*sin(theta))+25,0),curveVertex(30+i*(1+amp*sin(theta))+30,0),curveVertex(30+i*(1+amp*sin(theta))+31,0),endShape(),this.displacement.x=this.equilibrium.x+(this.lengthOfSpring-60)*amp*sin(theta),this.velocity.x=sqrt(this.k/this.m)*amp*cos(theta),this.acceleration.x=-this.k/this.m*(amp*sin(theta)),pop()}}function Axes(options){var options=options||{};this.lineColor=void 0!==options.lineColor?options.lineColor:"black",this.lineThickness=void 0!==options.lineThickness?options.lineThickness:1,this.rotateBy=void 0!==options.rotateBy?options.rotateBy:0,this.bounds=void 0!==options.bounds?options.bounds:{minX:0,maxX:500,minY:0,maxY:500},this.origin=void 0!==options.origin?options.origin:{x:(this.bounds.minX+this.bounds.maxX)/2,y:(this.bounds.minY+this.bounds.maxY)/2},this.highlightOrigin=void 0!==options.highlightOrigin?options.highlightOrigin:{on:!1},this.highlightOrigin.fillColor=void 0!==options.highlightOrigin.fillColor?options.highlightOrigin.fillColor:"red",this.highlightOrigin.size=void 0!==options.highlightOrigin.size?options.highlightOrigin.size:10,this.display=function(){push(),rotate(this.rotateBy),stroke(this.lineColor),strokeWeight(this.lineThickness),line(this.bounds.maxX/2,this.bounds.minY,this.bounds.maxX/2,this.bounds.maxY),line(this.bounds.minX,this.bounds.maxY/2,this.bounds.maxX,this.bounds.maxY/2),pop(),this.highlightOrigin.on&&(push(),translate(0,-this.bounds.minY),fill(this.highlightOrigin.fillColor),ellipse(this.origin.x,this.origin.y,this.highlightOrigin.size),pop())}}function FBD(position,howManyForces,options){var defaultRed=color(230,40,40);this.position=position,this.howManyForces=howManyForces;var options=options||{};this.showNetForce=void 0===options.showNetForce||options.showNetForce,this.shape=void 0!==options.shape?options.shape:"rect",this.shapeSize=void 0!==options.shapeSize?options.shapeSize:createVector(20,20),this.shapeColor=void 0!==options.shapeColor?options.shapeColor:"black",this.netForceColor=void 0!==options.netForceColor?options.netForceColor:"green",this.mag=void 0!==options.mag?options.mag:Array(this.howManyForces).fill(0),this.direction=void 0!==options.direction?options.direction:Array(this.howManyForces).fill(0),this.xoffsets=void 0!==options.xoffsets?options.xoffsets:Array(this.howManyForces).fill(0),this.yoffsets=void 0!==options.yoffsets?options.yoffsets:Array(this.howManyForces).fill(0),this.labels=void 0!==options.labels?options.labels:Array(this.howManyForces).fill("F"),this.mainlabelxpadding=15,this.mainlabelypadding=0,this.minilabelxpadding=15,this.minilabelypadding=0,this.miniArrowColors=void 0!==options.arrowColors?Array(this.howManyForces).fill(options.arrowColors):Array(this.howManyForces).fill(defaultRed),this.mainArrowColor=void 0!==options.netForceColor?options.netForceColor:defaultRed,this.miniArrowWidth=void 0!==options.miniArrowWidth?options.miniArrowWidth:15,v1=[],this.showNetForce&&(resultant=new Arrow(this.position,this.position),resultant.color=this.mainArrowColor,resultant.grab=!1,resultant.draggable=!1);for(var i=0;i<this.howManyForces;i++)v1[i]=new Arrow(this.position,p5.Vector.add(this.position,createVector(this.mag[i]*cos(this.direction[i]),this.mag[i]*sin(this.direction[i])))),v1[i].grab=!1,v1[i].draggable=!1,v1[i].color=this.miniArrowColors[i],v1[i].width=this.miniArrowWidth;this.update=function(){temp1=createVector(0,0);for(var i=0;i<this.howManyForces;i++)v1[i].origin=this.position,v1[i].target=p5.Vector.add(this.position,createVector(this.mag[i]*cos(this.direction[i]),this.mag[i]*sin(this.direction[i]))),temp1.add(p5.Vector.sub(v1[i].target,v1[i].origin)),v1[i].update();this.showNetForce&&(resultant.origin=this.position,resultant.target=p5.Vector.add(this.position,temp1),resultant.update())},this.display=function(){for(var i=0;i<this.howManyForces;i++)fill(0),push(),translate(this.xoffsets[i],this.yoffsets[i]),v1[i].display(),pop();for(var i=0;i<this.howManyForces;i++)push(),translate(this.xoffsets[i],this.yoffsets[i]),text(this.labels[i],this.minilabelxpadding+v1[i].target.x,this.minilabelypadding+v1[i].target.y,100,100),pop();this.showNetForce&&temp1.mag()>1e-4&&(text("Net Force",this.mainlabelxpadding+resultant.target.x,this.mainlabelypadding+resultant.target.y,100,100),resultant.display()),push(),fill(this.shapeColor),"rect"==this.shape?(rectMode(CENTER),rect(this.position.x,this.position.y,this.shapeSize.x,this.shapeSize.y)):"circle"==this.shape&&ellipse(this.position.x,this.position.y,this.shapeSize.x,this.shapeSize.y),pop()}}function Point(x,y){this.x=x,this.y=y}function Equation(){}function Plot(pointArray,red,green,blue,weight,title){void 0===title&&(title="default"),this.data=pointArray,this.color=color(red,green,blue,title="default"),this.weight=weight,this.pointSize=8,this.drawData=!0,this.plotTitle=title,this.timeplot=!1}function Graph(w,h,x_min,x_max,y_min,y_max,resolution){this.width=w,this.height=h,this.resolution=resolution,this.x_min=x_min,this.x_max=x_max,this.y_min=y_min,this.y_max=y_max,this.title="Title",this.xlabel="X-Axis",this.ylabel="Y-Axis",this.showLabels=!0,this.showTitle=!0,this.showBorder=!0,this.borderWidth=2,this.showLegend=!1,this.x_offset=0,this.y_offset=0,this.plots=[],this.bl_pix=new Point(this.x_offset+.15*this.width,this.y_offset+.95*this.height),this.tr_pix=new Point(this.x_offset+.95*this.width,this.y_offset+.15*this.height),this.bl_val=new Point(this.x_min,this.y_min),this.bl_val.invert(),this.xpix=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/this.resolution,this.ypix=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/this.resolution,this.xunit=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/(this.x_max-this.x_min),this.yunit=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/(this.y_max-this.y_min),this.origin=Point.getPoint(this.bl_pix),this.origin.add(this.bl_val.x*this.xunit,this.bl_val.y*this.yunit)}function Wave(options){this.bounds={x:width,y:height},this.theta=0,this.amplitude=8,this.wavelength=200,this.angularvelocity=2,this.displaySettings={line:{visible:!0,color:"black",strokeWeight:5},dots:{visible:!1,color:"red",highLightSpecial:!0,highLightColor:"green"}},this.xspacing=8,this.yvalues=new Array(floor(this.bounds.x/this.xspacing)),this.onWindowResize=function(){},this.update=function(){this.dx=TWO_PI/this.wavelength*this.xspacing,this.theta-=.01*this.angularvelocity;for(var x=this.theta,i=0;i<this.yvalues.length;i++)this.yvalues[i]=Math.sin(x)*this.amplitude*10,x+=this.dx},this.display=function(){if(this.displaySettings.dots.visible){noStroke();for(var x=2;x<this.yvalues.length-2;x+=2)20==x?fill(230,40,40):fill(0),ellipse(x*this.xspacing,height/2+this.yvalues[x],5,5)}if(this.displaySettings.line.visible){push(),noFill(),strokeWeight(this.displaySettings.line.strokeWeight),stroke(this.displaySettings.line.color),beginShape();for(var x=0;x<this.yvalues.length;x+=2)curveVertex(x*this.xspacing,height/2+this.yvalues[x]);endShape(),pop()}}}var somethingIsDragging,KineticMass=function(position,velocity,acceleration,mass,kmFill){this.position=new createVector(position.x,position.y),this.velocity=new createVector(velocity.x,velocity.y),this.acceleration=new createVector(acceleration.x,acceleration.y),this.previousVel=new createVector(0,0),this.limit=1e4,this.mass=mass,this.color=kmFill,this.outline=255,this.size=this.mass,this.tail=!1,this.tailFill=kmFill,this.tailStroke=kmFill,this.tailA=[],this.tailLength=70,this.tailSpacing=5,this.update=function(){!0===this.tail&&frameCount%this.tailSpacing==0&&this.tailA.push(this.position.copy()),this.previousVel=this.velocity.copy(),this.velocity.add(this.acceleration),this.velocity.limit(this.limit),this.avgYVel=(this.previousVel.y+this.velocity.y)/2,this.avgXVel=(this.previousVel.x+this.velocity.x)/2,this.position.x+=this.avgXVel,this.position.y+=this.avgYVel,this.tailA.length>this.tailLength&&(this.tailA=this.tailA.slice(-1*this.tailLength)),this.aVelocity+=this.aAcceleration,this.angle+=this.aVelocity},this.display=function(){if(fill(this.color),stroke(this.outline),ellipse(this.position.x,this.position.y,this.size,this.size),!0===this.tail){push();for(var i=0;i<this.tailA.length;i++)stroke("rgba("+red(color(this.tailStroke))+","+green(color(this.tailStroke))+","+blue(color(this.tailStroke))+","+map(i,0,this.tailA.length,0,1)+")"),fill("rgba("+red(color(this.tailFill))+","+green(color(this.tailFill))+","+blue(color(this.tailFill))+","+map(i,0,this.tailA.length,0,1)+")"),ellipse(this.tailA[i].x,this.tailA[i].y,3,3);pop()}},this.giveItAnAcceleration=function(accel){this.acceleration=accel},this.applyForce=function(force){var f=force.copy();f.div(this.mass),this.acceleration=f},this.wrapEdges=function(){this.position.x>width?this.position.x=0:this.position.x<0&&(this.position.x=width),this.position.y>height?this.position.y=0:this.position.y<0&&(this.position.y=height)},this.wrapEdgesBounceFloor=function(){this.position.x>width?this.position.x=0:this.position.x<0&&(this.position.x=width),this.position.y>height-this.size/2&&(overiny=this.position.y-height+this.size/2,vatheight=Math.sqrt(Math.pow(this.velocity.y,2)-2*this.acceleration.y*overiny),this.position.y=height-this.size/2,this.velocity.y=-1*vatheight)},this.bounceEdges=function(){this.position.x<0+this.size/2&&(overinx=this.position.x-this.size/2,vatwidth=Math.sqrt(Math.pow(this.velocity.x,2)-2*this.acceleration.x*overinx),this.velocity.x=1*vatwidth,this.position.x=0+this.size/2),this.position.x>width-this.size/2&&(overinx=this.position.x-width+this.size/2,vatwidth=Math.sqrt(Math.pow(this.velocity.x,2)-2*this.acceleration.x*overinx),this.position.x=width-this.size/2,this.velocity.x=-1*vatwidth),this.position.y<0+this.size/2&&(overiny=this.position.y-this.size/2,vatheight=Math.sqrt(Math.pow(this.velocity.y,2)-2*this.acceleration.y*overiny),this.velocity.y=1*vatheight,this.position.y=0+this.size/2),this.position.y>height-this.size/2&&(overiny=this.position.y-height+this.size/2,vatheight=Math.sqrt(Math.pow(this.velocity.y,2)-2*this.acceleration.y*overiny),this.position.y=height-this.size/2,this.velocity.y=-1*vatheight)},this.towardMouse=function(a){var mouse=new Vector(mouseX,mouseY),dir=Vector.sub(mouse,this.position);dir.normalize(),dir.mult(a),this.acceleration=dir}};KineticMass.prototype.get=function(){return new KineticMass(this.position,this.velocity,this.acceleration)},KineticMass.get=function(m){return new KineticMass(m.position,m.velocity,m.acceleration)};var Mover=function(position,velocity,acceleration,mass,color){this.position=new createVector(position.x,position.y),this.velocity=new createVector(velocity.x,velocity.y),this.acceleration=new createVector(acceleration.x,acceleration.y),this.limit=20,this.mass=mass,this.color=color,this.size=this.mass,this.outline=255,this.tail=!1,this.tailFill="white",this.tailStroke="black",this.tailA=[],this.angle=0,this.aVelocity=0,this.aAcceleration=0,this.update=function(){!0===this.tail&&this.tailA.push(this.position.copy()),this.velocity.add(this.acceleration),this.velocity.limit(this.limit),this.position.add(this.velocity),this.acceleration.mult(0);var hCut=70;this.tailA.length>hCut&&(this.tailA=this.tailA.slice(-1*hCut)),this.aVelocity+=this.aAcceleration,this.angle+=this.aVelocity},this.display=function(){if(fill(this.color),stroke(this.outline),ellipse(this.position.x,this.position.y,this.size,this.size),!0===this.tail){push(),fill(this.tailFill),stroke(this.tailStroke);for(var i=0;i<this.tailA.length;i++)ellipse(this.tailA[i].x,this.tailA[i].y,3,3);pop()}},this.giveItAnAcceleration=function(accel){this.acceleration=accel},this.applyForce=function(force){var f=force.copy();f.div(this.mass),this.acceleration.add(f)},this.wrapEdges=function(){this.position.x>width?this.position.x=0:this.position.x<0&&(this.position.x=width),this.position.y>height?this.position.y=0:this.position.y<0&&(this.position.y=height)},this.bounceEdges=function(){this.position.x<0+this.size/2&&(this.velocity.x*=-1,this.position.x=0+this.size/2),this.position.x>width-this.size/2&&(this.velocity.x*=-1,this.position.x=width-this.size/2),this.position.y<0+this.size/2&&(this.velocity.y*=-1,this.position.y=0+this.size/2),this.position.y>height-this.size/2&&(this.velocity.y*=-1,this.position.y=height-this.size/2)},this.towardMouse=function(a){var mouse=new Vector(mouseX,mouseY),dir=Vector.sub(mouse,this.position);dir.normalize(),dir.mult(a),this.acceleration=dir}};Mover.prototype.get=function(){return new Mover(this.position,this.velocity,this.acceleration)},Mover.get=function(m){return new Mover(m.position,m.velocity,m.acceleration)};var options={maxHeight:300},movingBackground=function(whichKind,position,initialVelocity,acceleration,options){if(options=options||{},this.maxBuildingHeight=void 0!==options.maxBuildingHeight?options.maxBuildingHeight:100,this.amountOfBuildings=void 0!==options.amountOfBuildings?options.amountOfBuildings:width/14,this.amountOfClouds=void 0!==options.amountOfClouds?options.amountOfClouds:width/5,this.position=position,this.velocity=initialVelocity,this.acceleration=acceleration,this.whichKind=whichKind,this.shapes=[],this.avgVel=createVector(0,0),"cityStreet"==this.whichKind)for(noOfBuildings=this.amountOfBuildings,rectMode(CORNERS),i=0;i<noOfBuildings;i++)this.shapes.push(new backgroundShape(this.whichKind,this.velocity,this.maxBuildingHeight)),this.shapes[i].position=createVector(-2*width+70*i,this.position.y),this.shapes[i].name="bldg "+i,this.shapes[i].layer=i,this.shapes[i].scale=3;if("clouds"==this.whichKind)for(noOfClouds=this.amountOfClouds,i=0;i<noOfClouds;i++)this.shapes.push(new backgroundShape(this.whichKind,this.velocity)),this.shapes[i].position=createVector(random(-width,2*width),random(-height,2*height)),this.shapes[i].name="cloud "+i,this.shapes[i].layer=i,this.shapes[i].scale=2;this.l=this.shapes.length,this.update=function(){this.oldVelocity=this.velocity,this.velocity.add(this.acceleration),this.avgVel.x=this.oldVelocity.x+.5*this.velocity.x,this.avgVel.y=this.oldVelocity.y+.5*this.velocity.y},this.display=function(){for(i=this.l-1;i>=0;i--)this.shapes[i].run()}},backgroundShape=function(whichKind,velocity,maxHeight){this.howTall=random(40,maxHeight),this.howWide=random(20,100),this.fill=random(60,230),this.whichKind=whichKind,this.avgVel=velocity,this.run=function(){this.needsMoving(),this.update(),this.position.x<width+100&&this.position.x>-100&&this.position.y>-100&&this.position.y<height+100&&this.display()},this.update=function(){"cityStreet"==this.whichKind?(rectMode(CORNERS),this.position.add(this.avgVel)):"clouds"==this.whichKind&&this.position.add(p5.Vector.mult(this.avgVel,(noOfClouds-this.layer)/noOfClouds))},this.display=function(){"cityStreet"==this.whichKind?(push(),fill(this.fill),noStroke(),rect(this.position.x,this.position.y,this.position.x+this.howWide,this.position.y-this.howTall),pop(),push(),stroke(0),line(0,this.position.y,width,this.position.y),pop()):"clouds"==this.whichKind&&(this.scale=2,push(),fill(this.fill,200),noStroke(),ellipse(this.position.x,this.position.y,this.howWide,this.howWide),pop())},this.needsMoving=function(){this.position.x<-width*(this.scale-1)&&(this.position.x=width*this.scale),this.position.x>width*this.scale&&(this.position.x=-width*(this.scale-1)),this.position.y<-height*(this.scale-1)&&(this.position.y=height*this.scale),this.position.y>height*this.scale&&(this.position.y=-height*(this.scale-1))}},Wheel=function(x,y,d,options){angleMode(RADIANS);var options=options||{};this.x=x,this.y=y,this.r=d/2,this.d=d,this.arrowDecorations=[],this.arrows=[],this.rimColor=color("rgba(0,0,0,1)"),this.spokeColor=color("rgba(0,0,0,1)"),this.wheelColor=color("rgba(0,0,0,.1)"),this.specialEffects=void 0!==options.specialEffects?options.specialEffects:{active:!1,style:"splash"},this.specialEffects.active&&"splash"==this.specialEffects.style&&(this.specialEffects.system=new ParticleSystem(createVector(-this.r/4,this.r))),this.rotate=!1,this.angle=0,this.angularSpeed=0,this.translationalSpeed=0,this.vdecorate=!1,this.cdecorate=!1,this.translation=!1,this.rotation=!1,this.rollingNoSlip=!1;var orig=createVector(this.x,this.y),temp=createVector(this.x+this.r,this.y-this.r);this.a1=new Arrow(orig,temp),this.a2=new Arrow(orig,temp),this.a3=new Arrow(orig,temp),this.a1.width=10,this.a2.width=10,this.a3.width=10,this.a1.color=color("green"),this.a2.color=color("green"),this.a3.color=color("green"),this.a1.draggable=!1,this.a1.grab=!1,this.a2.draggable=!1,this.a2.grab=!1,this.a3.draggable=!1,this.a3.grab=!1,this.addDecorations=function(decorations){for(i=0;i<this.arrowDecorations.length;i++)this.arrows[i]=new Arrow(createVector(0,this.arrowDecorations[i].radialLocation*this.r),createVector(25*(this.angularSpeed+this.translationalSpeed)*this.arrowDecorations[i].radialLocation,this.arrowDecorations[i].radialLocation*this.r)),this.arrows[i].color=color("green"),this.arrows[i].width=10,this.arrows[i].draggable=!1,this.arrows[i].grab=!1},this.wrap=function(){this.x-this.r>width&&(this.x=-this.r),this.x+this.r<0&&(this.x=width+this.r)},this.update=function(){this.x+=this.translationalSpeed,this.angularSpeed=this.translationalSpeed/(this.r-.1*this.r)},this.draw=function(){push(),angleMode(RADIANS),translate(this.x,this.y),1==this.specialEffects.active&&(this.specialEffects.system.addParticle(),this.specialEffects.system.display()),1==this.rotate&&(rotate(this.angle),this.angle+=this.angularSpeed),fill(this.wheelColor),stroke(this.rimColor),strokeWeight(.1*this.r),ellipse(0,0,this.d,this.d),stroke(this.spokeColor),strokeWeight(2);for(var i=0;i<16;i++)line(0,0,(this.r-2)*cos(Math.PI/6*i),(this.r-2)*sin(Math.PI/6*i));for(i=0;i<this.arrowDecorations.length;i++)push(),rotate(this.arrowDecorations[i].rimPos),this.arrows[i].target.x=-25*(this.angularSpeed*this.r-this.translationalSpeed*Math.cos(-this.arrowDecorations[i].rimPos+this.angle))*this.arrowDecorations[i].radialLocation,this.arrows[i].target.y=this.arrowDecorations[i].radialLocation*this.r-this.translationalSpeed*Math.sin(-this.arrowDecorations[i].rimPos+this.angle)*25,this.arrows[i].update(),this.arrows[i].display(),pop();1==this.cdecorate&&(stroke(255,0,0),strokeWeight(4),noFill(),arc(0,0,this.d,this.d,0,Math.PI),stroke(0,0,255),arc(0,0,this.d,this.d,Math.PI,2*Math>PI),noStroke(),fill(255,0,0),ellipse(this.r,0,10,10),fill(30,30,255),ellipse(-this.r,0,10,10)),pop(),1==this.vdecorate&&(1==this.rotation&&(this.a1.origin.x=this.x,this.a1.origin.y=this.y-this.r,this.a1.target.x=this.x+25*this.angularSpeed,this.a1.target.y=this.y-this.r,this.a2.origin.x=this.x,this.a2.origin.y=this.y+this.r,this.a2.target.x=this.x-25*this.angularSpeed,this.a2.target.y=this.y+this.r,this.a1.update(),this.a2.update(),this.a1.display(),this.a2.display()),1==this.translation&&(this.a1.origin.x=this.x,this.a1.origin.y=this.y-this.r,this.a1.target.x=this.x+25*this.translationalSpeed,this.a1.target.y=this.y-this.r,this.a2.origin.x=this.x,this.a2.origin.y=this.y,this.a2.target.x=this.x+25*this.translationalSpeed,this.a2.target.y=this.y,this.a3.origin.x=this.x,this.a3.origin.y=this.y+this.r,this.a3.target.x=this.x+25*this.translationalSpeed,this.a3.target.y=this.y+this.r,this.a1.update(),this.a2.update(),this.a3.update(),this.a1.display(),this.a2.display(),this.a3.display()))}};FR=30,Point.prototype.add=function(x,y){this.x+=x,this.y-=y},Point.prototype.fixChoord=function(){this.y>0&&(this.y=-1*this.y)},Point.prototype.invert=function(){this.y*=-1,this.x*=-1},Point.prototype.makePix=function(xoff,yoff,scalex,scaley){this.fixChoord(),this.x=this.x*scalex+xoff,this.y=this.y*scaley+yoff},Point.getDist=function(p1,p2){var pFinal=new Point(0,0);return pFinal.x=Math.abs(p1.x-p2.x),pFinal.y=Math.abs(p1.y-p2.y),pFinal},Point.getPoint=function(p){return new Point(p.x,p.y)},Plot.prototype.plot=function(graph){fill(this.color),stroke(this.color),strokeWeight(this.weight);for(var i=0;i<this.data.length;i++)i<this.data.length-1&&this.data[i+1].x<=graph.tr_pix.x&&this.data[i+1].y>=graph.tr_pix.y&&this.data[i].x>=graph.bl_pix.x&&this.data[i].y<=graph.bl_pix.y&&line(this.data[i].x,this.data[i].y,this.data[i+1].x,this.data[i+1].y),this.data[i].x<=graph.tr_pix.x&&this.data[i].y>=graph.tr_pix.y&&this.data[i].x>=graph.bl_pix.x&&this.data[i].y<=graph.bl_pix.y&&ellipse(this.data[i].x,this.data[i].y,this.pointSize,this.pointSize)},Plot.prototype.getUser=function(){for(var d=new Point(0,0),pmouse=new Point(mouseX,mouseY),closest=1e5,closestIndex=0,i=0;i<this.data.length;i++)d=Point.getDist(pmouse,this.data[i]),closest>d.x&&(closest=d.x,closestIndex=i);this.data[closestIndex].y=mouseY},Plot.prototype.tpRecord=function(variable,graph){this.timeplot=!0;for(var bl=graph.bl_pix.x,tr=graph.x_max,timescale=FR,i=0;i<this.data.length;i++)this.data[i].x-=graph.xunit/timescale;this.data[0]&&this.data[0].x<bl&&this.data.splice(0,1);var p=new Point(tr,variable);this.data.push(p)},Plot.prototype.getPointDist=function(num1,num2){return dist(this.data[num1].x,this.data[num1].y,this.data[num2].x,this.data[num2].y)},Plot.prototype.fixChoord=function(scalex,scaley,origin){for(var p=Point.getPoint(origin),i=0;i<this.data.length;i++)p.add(this.data[i].x*scalex,this.data[i].y*scaley),this.data[i].x=p.x,this.data[i].y=p.y,p=Point.getPoint(origin)},Graph.prototype.update=function(){},Graph.prototype.set_offset=function(xoff,yoff){this.x_offset=xoff,this.y_offset=yoff,this.bl_pix=new Point(this.x_offset+.15*this.width,this.y_offset+.85*this.height),this.tr_pix=new Point(this.x_offset+.9*this.width,this.y_offset+.15*this.height),this.bl_val=new Point(this.x_min,this.y_min),this.bl_val.invert(),this.xpix=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/this.resolution,this.ypix=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/this.resolution,this.xunit=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/(this.x_max-this.x_min),this.yunit=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/(this.y_max-this.y_min),this.origin=Point.getPoint(this.bl_pix),this.origin.add(this.bl_val.x*this.xunit,this.bl_val.y*this.yunit),console.log(this.origin.x,this.origin.y)},Graph.prototype.drawBg=function(bg,border){void 0===bg&&(bg=color(255)),void 0===border&&(border=color(0)),0==this.showBorder?noStroke():(stroke(border),strokeWeight(this.borderWidth)),fill(bg),rect(this.x_offset,this.y_offset,this.width,this.height),strokeWeight(1),stroke(0),line(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y),line(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y);var xdiff=(this.x_max-this.x_min)/this.resolution,ydiff=(this.y_max-this.y_min)/this.resolution;fill(0),stroke(180);var count=this.x_min,pixCount=0;text(this.x_min,this.bl_pix.x,this.bl_pix.y+20);for(var i=0;i<this.resolution;i++)count+=xdiff,pixCount+=this.xpix,line(this.bl_pix.x+pixCount,this.bl_pix.y+5,this.bl_pix.x+pixCount,this.tr_pix.y),text((Math.round(10*count)/10).toString(),this.bl_pix.x+pixCount,this.bl_pix.y+20);var count=this.y_min,pixCount=0;text(this.y_min,this.bl_pix.x-20,this.bl_pix.y);for(var i=0;i<this.resolution;i++)count+=ydiff,pixCount+=this.ypix,line(this.bl_pix.x-5,this.bl_pix.y-pixCount,this.tr_pix.x,this.bl_pix.y-pixCount),text((Math.round(10*count)/10).toString(),this.bl_pix.x-20,this.bl_pix.y-pixCount);if(1==this.showTitle)if(textSize(16),textAlign(CENTER,CENTER),1!=this.showLegend)text(this.title,this.x_offset+this.width/2,this.y_offset+.07*this.height);else{textSize(16),textAlign(CENTER,CENTER),text(this.title,this.x_offset+this.width/4,this.y_offset+.07*this.height),fill(bg),stroke(border);var top=this.y_offset+.02*this.height,left=this.x_offset+this.width/2;rect(left,top,this.width/2.2,.1*this.height),textSize(12),textAlign(LEFT,TOP),noStroke(),fill(0);for(var i=0;i<this.plots.length;i++)text(this.plots[i].plotTitle,left+8,top+2),top+=12}1==this.showLabels&&(textAlign(CENTER,CENTER),textSize(12),text(this.xlabel,this.x_offset+this.width/2,this.y_offset+.97*this.height),push(),translate(this.x_offset+.03*this.width-10,this.y_offset+this.height/2),rotate(-Math.PI/2),text(this.ylabel,0,0),pop())},Graph.prototype.plotAll=function(){for(var i=0;i<this.plots.length;i++){if(1==this.plots[i].timeplot){var temp=new Plot;temp.data=[],temp.data[0]=this.plots[i].data[this.plots[i].data.length-1],temp.fixChoord(this.xunit,this.yunit,this.origin),this.plots[i].data[this.plots[i].data.length-1]=temp.data[0]}this.plots[i].plot(this)}},Graph.prototype.addPlot=function(aplot){aplot.fixChoord(this.xunit,this.yunit,this.origin),this.plots.push(aplot)},Graph.prototype.getZeroes=function(){},Graph.prototype.getChoord=function(x,y){},Graph.makeData=function(xarray,yarray){var finalArray=[];if(xarray.length==yarray.length)for(var i=0;i<xarray.length;i++){var p=new Point(xarray[i],yarray[i]);finalArray.push(p)}else console.log("xarray and yarray lengths differ.");return finalArray},Graph.makeUserPlot=function(x1,x2,resolution,lineColor,weight,psize){var templot=new Plot;void 0===lineColor&&(lineColor=color(0)),void 0===weight&&(weight=1),void 0===psize&&(psize=3),templot.lineColor=lineColor,templot.data=[],templot.weight=weight,templot.pointSize=psize;for(var scale=(x2-x1)/resolution,i=x1;i<x2;i+=scale){var p=new Point(i,0);templot.data.push(p)}return templot};var Particle=function(origin,options){var options=options||{};this.position=origin.copy(),this.acceleration=void 0!==options.acceleration?createVector(options.acceleration.x,options.acceleration.y):createVector(0,.05),this.velocity=void 0!==options.velocity?createVector(random(options.velocity.x1,options.velocity.x2),random(options.velocity.y1,options.velocity.y2)):createVector(random(0,-3),random(0,-4)),this.lifespan=void 0!==options.lifespan?options.lifespan:170,this.particleSize=void 0!==options.particleSize?options.particleSize:{x:5,y:5},this.strokeColor=void 0!==options.strokeColor?options.strokeColor:{r:5,g:5,b:250,a:1},this.strokeWeight=void 0!==options.strokeWeight?options.strokeWeight:1,this.fillColor=void 0!==options.fillColor?options.fillColor:{r:5,g:5,b:250,a:1}};Particle.prototype.run=function(){this.update(),this.display()},Particle.prototype.update=function(){this.velocity.add(this.acceleration),this.position.add(this.velocity),this.lifespan-=2},Particle.prototype.display=function(){stroke(this.strokeColor.r,this.strokeColor.g,this.strokeColor.b,this.strokeColor.a*this.lifespan),strokeWeight(this.strokeWeight),fill(this.fillColor,this.lifespan,.1),fill(this.fillColor.r,this.fillColor.g,this.fillColor.b,this.fillColor.a*this.lifespan),ellipse(this.position.x,this.position.y,this.particleSize.x,this.particleSize.y)},Particle.prototype.isDead=function(){return this.lifespan<0};var ParticleSystem=function(position){this.origin=position.copy(),this.particles=[]};ParticleSystem.prototype.addParticle=function(){this.particles.push(new Particle(this.origin))},ParticleSystem.prototype.display=function(){for(var i=this.particles.length-1;i>=0;i--){var p=this.particles[i];p.run(),p.isDead()&&this.particles.splice(i,1)}};