function Arrow(a,b,c){var c=c||{};this.origin=a.copy(),this.target=b.copy(),this.grab=void 0===c.grab||c.grab,this.draggable=void 0===c.draggable||c.grabbable,this.showComponents=void 0!==c.showComponents&&c.showComponents,this.color=void 0!==c.color?c.color:color("rgb(255,255,255)"),this.selected=void 0!==c.selected&&c.selected,this.dragSelected=void 0!==c.dragSelected&&c.dragSelected,this.isDragging=void 0!==c.isDragging&&c.isDragging,this.width=void 0!==c.width?c.width:20,this.oldX=0,this.oldY=0,this.display=function(){push(),fill(this.color),noStroke();var a=dist(this.origin.x,this.origin.y,this.target.x,this.target.y),b=this.width;translate(this.origin.x,this.origin.y);var c=angCalc(this);rotate(c),this.boundChk()&&1==this.draggable&&fill(red(this.color)+(255-red(this.color))/2,green(this.color)+(255-green(this.color))/2,blue(this.color)+(255-blue(this.color))/2),1==this.isDragging&&fill(red(this.color)+(255-red(this.color))/2,green(this.color)+(255-green(this.color))/2,blue(this.color)+(255-blue(this.color))/2),drawArrow(b,a,this),pop(),!0===this.showComponents&&(push(),strokeWeight(2),stroke(this.color),textSize(18),line(this.origin.x,this.origin.y,this.target.x,this.origin.y),line(this.origin.x,this.origin.y,this.origin.x,this.target.y),pop(),push(),fill(0),text("y: "+Math.round(-1*(this.target.y-this.origin.y)).toString(),this.origin.x,this.target.y),text("x: "+Math.round(this.target.x-this.origin.x).toString(),this.target.x,this.origin.y),pop())},this.update=function(){somethingIsDragging&&(this.selected=!0),this.selected?(this.target.x=mouseX,this.target.y=mouseY):this.dragSelected&&(this.oldX!==mouseX&&0!==this.oldX&&(this.target.x+=mouseX-this.oldX,this.origin.x+=mouseX-this.oldX),this.oldY!==mouseY&&0!==this.oldY&&(this.target.y+=mouseY-this.oldY,this.origin.y+=mouseY-this.oldY),this.oldX=mouseX,this.oldY=mouseY)},this.boundChk=function(){var a=dist(mouseX,mouseY,this.origin.x,this.origin.y),b=dist(mouseX,mouseY,this.target.x-2,this.target.y-2),c=dist(this.origin.x,this.origin.y,this.target.x-2,this.target.y-2);return buffer=2,void 0===buffer&&(buffer=1),a+b>=c-buffer&&a+b<=c+buffer}}function drawArrow(a,b,c){if(translate(0,-a/2),rect(0,a/4,b-8,a/2),triangle(b-8,0,b-8,a,b+a/2,a/2),!0===c.grab){dist(c.target.x,c.target.y,mouseX,mouseY)<6?(fill(40,40),strokeWeight(1),stroke("black"),ellipse(b,a/2,1.5*c.width,1.5*c.width),mouseIsPressed?(c.selected=!0,fill(255,255,0,150),c.isDragging=!0):(c.selected=!1,c.isDragging=!1,fill(255,255,255,200))):noFill(),!0===c.draggable&&(c.boundChk()?mouseIsPressed?(c.dragSelected=!0,c.isDragging=!0,somethingIsDragging=!0,c.isDragging?(c.oldX=mouseX,c.oldY=mouseY,fill(255,255,0,100)):somethingIsDragging&&(c.oldX=c.oldX,c.oldY=c.oldY)):(c.dragSelected=!1,c.isDragging=!1,somethingIsDragging=!1,fill(255,255,255,100),this.oldX=0,this.oldY=0):noFill(),c.selected&&c.dragSelected&&(c.dragSelected=!1))}}function angCalc(a){return atan2(a.target.y-a.origin.y,a.target.x-a.origin.x)}function Spring(a,b,c,d,e,f,g){var g=g||{};this.boxsize=void 0!==g.boxsize?g.boxsize:70,this.noOfCoils=void 0!==g.noOfCoils?g.noOfCoils:11,this.lengthOfSpring=d,this.transAmp=15,this.tzero=millis(),this.time=0,this.play=!0,this.xcent=a.x,this.ycent=a.y,this.rotation=0,this.oscAmp=e,this.freq=sqrt(b/c-sq(f)/(4*sq(c))),this.mu=f,this.m=c,this.k=b,this.equilibrium=createVector(this.lengthOfSpring,0),this.displacement=createVector(0,0),this.velocity=createVector(0,0),this.acceleration=createVector(0,0),this.setPlay=function(a){this.play=a},this.update=function(){this.play?this.time=millis()/1e3-this.tzero:this.tzero=millis()/1e3-this.time},this.display=function(){push();var a=this.time*this.freq,b=this.oscAmp*exp(-1*this.mu*this.time/(2*this.m));translate(this.xcent,this.ycent),rotate(this.rotation),fill(200),rect(this.lengthOfSpring-this.boxsize/2+(this.lengthOfSpring-60)*b*sin(a),-this.boxsize/2,this.boxsize,this.boxsize),noFill(),stroke(80),strokeWeight(3),beginShape(),curveVertex(-1,0),curveVertex(0,0),curveVertex(5,0),curveVertex(20,0),curveVertex(25,0);for(var c=0;c<this.lengthOfSpring-60;c++)curveVertex(30+c*(1+b*sin(a)),-this.transAmp*sin(2*PI*this.noOfCoils*c/this.lengthOfSpring));curveVertex(30+c*(1+b*sin(a))+5,0),curveVertex(30+c*(1+b*sin(a))+20,0),curveVertex(30+c*(1+b*sin(a))+25,0),curveVertex(30+c*(1+b*sin(a))+30,0),curveVertex(30+c*(1+b*sin(a))+31,0),endShape(),this.displacement.x=this.equilibrium.x+(this.lengthOfSpring-60)*b*sin(a),this.velocity.x=sqrt(this.k/this.m)*b*cos(a),this.acceleration.x=-this.k/this.m*(b*sin(a)),pop()}}function Axes(a){this.options=a||{},this.styles=void 0!==typeof a.styles?a.styles:{},this.lineColor=void 0!==this.lineColor?this.lineColor:"black",this.lineThickness=void 0!==this.lineThickness?this.lineThickness:1,this.rotateBy=void 0!==a.rotateBy?a.rotateBy:0,this.bounds=void 0!==a.bounds?a.bounds:{minX:0,maxX:500,minY:0,maxY:500},this.origin=void 0!==a.origin?a.origin:{x:(this.bounds.minX+this.bounds.maxX)/2,y:(this.bounds.minY+this.bounds.maxY)/2},this.highlightOrigin=void 0!==a.highlightOrigin?a.highlightOrigin:{on:!1},this.highlightOrigin.on&&(this.highlightOrigin.fillColor=void 0!==a.highlightOrigin.fillColor?a.highlightOrigin.fillColor:"red",this.highlightOrigin.size=void 0!==a.highlightOrigin.size?a.highlightOrigin.size:10),this.display=function(){push(),rotate(this.rotateBy),stroke(this.styles.lineColor),strokeWeight(this.styles.lineThickness),line(this.bounds.maxX/2,this.bounds.minY,this.bounds.maxX/2,this.bounds.maxY),line(this.bounds.minX,this.bounds.maxY/2,this.bounds.maxX,this.bounds.maxY/2),pop(),this.highlightOrigin.on&&(push(),translate(0,-this.bounds.minY),fill(this.highlightOrigin.fillColor),ellipse(this.origin.x,this.origin.y,this.highlightOrigin.size),pop())}}function FBD(a,b,c){var d=color(230,40,40);this.position=a,this.howManyForces=b;var c=c||{};this.showNetForce=void 0===c.showNetForce||c.showNetForce,this.shape=void 0!==c.shape?c.shape:"rect",this.shapeSize=void 0!==c.shapeSize?c.shapeSize:createVector(20,20),this.shapeColor=void 0!==c.shapeColor?c.shapeColor:"black",this.netForceColor=void 0!==c.netForceColor?c.netForceColor:"green",this.mag=void 0!==c.mag?c.mag:Array(this.howManyForces).fill(0),this.direction=void 0!==c.direction?c.direction:Array(this.howManyForces).fill(0),this.xoffsets=void 0!==c.xoffsets?c.xoffsets:Array(this.howManyForces).fill(0),this.yoffsets=void 0!==c.yoffsets?c.yoffsets:Array(this.howManyForces).fill(0),this.labels=void 0!==c.labels?c.labels:Array(this.howManyForces).fill("F"),this.mainlabelxpadding=15,this.mainlabelypadding=0,this.minilabelxpadding=15,this.minilabelypadding=0,this.miniArrowColors=void 0!==c.arrowColors?Array(this.howManyForces).fill(c.arrowColors):Array(this.howManyForces).fill(d),this.mainArrowColor=void 0!==c.netForceColor?c.netForceColor:d,this.miniArrowWidth=void 0!==c.miniArrowWidth?c.miniArrowWidth:15,v1=[],this.showNetForce&&(resultant=new Arrow(this.position,this.position),resultant.color=this.mainArrowColor,resultant.grab=!1,resultant.draggable=!1);for(var e=0;e<this.howManyForces;e++)v1[e]=new Arrow(this.position,p5.Vector.add(this.position,createVector(this.mag[e]*cos(this.direction[e]),this.mag[e]*sin(this.direction[e])))),v1[e].grab=!1,v1[e].draggable=!1,v1[e].color=this.miniArrowColors[e],v1[e].width=this.miniArrowWidth;this.update=function(){temp1=createVector(0,0);for(var a=0;a<this.howManyForces;a++)v1[a].origin=this.position,v1[a].target=p5.Vector.add(this.position,createVector(this.mag[a]*cos(this.direction[a]),this.mag[a]*sin(this.direction[a]))),temp1.add(p5.Vector.sub(v1[a].target,v1[a].origin)),v1[a].update();this.showNetForce&&(resultant.origin=this.position,resultant.target=p5.Vector.add(this.position,temp1),resultant.update())},this.display=function(){for(var a=0;a<this.howManyForces;a++)fill(0),push(),translate(this.xoffsets[a],this.yoffsets[a]),v1[a].display(),pop();for(var a=0;a<this.howManyForces;a++)push(),translate(this.xoffsets[a],this.yoffsets[a]),text(this.labels[a],this.minilabelxpadding+v1[a].target.x,this.minilabelypadding+v1[a].target.y,100,100),pop();this.showNetForce&&temp1.mag()>1e-4&&(text("Net Force",this.mainlabelxpadding+resultant.target.x,this.mainlabelypadding+resultant.target.y,100,100),resultant.display()),push(),fill(this.shapeColor),"rect"==this.shape?(rectMode(CENTER),rect(this.position.x,this.position.y,this.shapeSize.x,this.shapeSize.y)):"circle"==this.shape&&ellipse(this.position.x,this.position.y,this.shapeSize.x,this.shapeSize.y),pop()}}function Point(a,b){this.x=a,this.y=b}function Equation(){}function Plot(a,b,c,d,e,f){void 0===f&&(f="default"),this.data=a,this.color=color(b,c,d,f="default"),this.weight=e,this.pointSize=8,this.drawData=!0,this.plotTitle=f,this.timeplot=!1}function Graph(a,b,c,d,e,f,g){this.width=a,this.height=b,this.resolution=g,this.x_min=c,this.x_max=d,this.y_min=e,this.y_max=f,this.title="Title",this.xlabel="X-Axis",this.ylabel="Y-Axis",this.showLabels=!0,this.showTitle=!0,this.showBorder=!0,this.borderWidth=2,this.showLegend=!1,this.x_offset=0,this.y_offset=0,this.plots=[],this.bl_pix=new Point(this.x_offset+.15*this.width,this.y_offset+.95*this.height),this.tr_pix=new Point(this.x_offset+.95*this.width,this.y_offset+.15*this.height),this.bl_val=new Point(this.x_min,this.y_min),this.bl_val.invert(),this.xpix=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/this.resolution,this.ypix=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/this.resolution,this.xunit=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/(this.x_max-this.x_min),this.yunit=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/(this.y_max-this.y_min),this.origin=Point.getPoint(this.bl_pix),this.origin.add(this.bl_val.x*this.xunit,this.bl_val.y*this.yunit)}function Wave(a){this.options=a||{},this.type=this.options.type||"sine",this.bounds={x:width,y:height},this.theta=180,this.amplitude=8,this.wavelength=200,this.angularvelocity=2,this.xspacing=8,this.yspacing=10,this.yvalues=new Array(floor(this.bounds.x/this.xspacing)),this.timestep=.01,this.styles={line:{visible:!0,color:"red",strokeWeight:5},dots:{visible:!1,size:5,color:"black",highLightSpecial:!0,highLightColor:"red"}},this.styles.line.visible=!0,this.styles.line.color=this.styles.line.color||"blue"}function GrassyBackground(a){this.options=a||{},this.options.ground=this.options.ground||"green",BasicBackground.call(this,this.options)}var somethingIsDragging,KineticMass=function(a,b,c,d,e,f){this.options=f||{},this.position=new createVector(a.x,a.y),this.velocity=new createVector(b.x,b.y),this.acceleration=new createVector(c.x,c.y),this.previousVel=new createVector(0,0),this.limit=1e4,this.mass=d,this.color=e,this.outline=255,this.size=this.mass,this.tail=!1,this.tailFill=e,this.tailStroke=e,this.tailA=[],this.tailLength=70,this.tailSpacing=5,this.update=function(){!0===this.tail&&frameCount%this.tailSpacing==0&&this.tailA.push(this.position.copy()),this.previousVel=this.velocity.copy(),this.velocity.add(this.acceleration),this.velocity.limit(this.limit),this.avgYVel=(this.previousVel.y+this.velocity.y)/2,this.avgXVel=(this.previousVel.x+this.velocity.x)/2,this.position.x+=this.avgXVel,this.position.y+=this.avgYVel,this.tailA.length>this.tailLength&&(this.tailA=this.tailA.slice(-1*this.tailLength)),this.aVelocity+=this.aAcceleration,this.angle+=this.aVelocity},this.display=function(){if(fill(this.color),stroke(this.outline),ellipse(this.position.x,this.position.y,this.size,this.size),!0===this.tail){push();for(var a=0;a<this.tailA.length;a++)stroke("rgba("+red(color(this.tailStroke))+","+green(color(this.tailStroke))+","+blue(color(this.tailStroke))+","+map(a,0,this.tailA.length,0,1)+")"),fill("rgba("+red(color(this.tailFill))+","+green(color(this.tailFill))+","+blue(color(this.tailFill))+","+map(a,0,this.tailA.length,0,1)+")"),ellipse(this.tailA[a].x,this.tailA[a].y,3,3);pop()}},this.giveItAnAcceleration=function(a){this.acceleration=a},this.applyForce=function(a){var b=a.copy();b.div(this.mass),this.acceleration=b},this.wrapEdges=function(){this.position.x>width?this.position.x=0:this.position.x<0&&(this.position.x=width),this.position.y>height?this.position.y=0:this.position.y<0&&(this.position.y=height)},this.wrapEdgesBounceFloor=function(){this.position.x>width?this.position.x=0:this.position.x<0&&(this.position.x=width),this.position.y>height-this.size/2&&(overiny=this.position.y-height+this.size/2,vatheight=Math.sqrt(Math.pow(this.velocity.y,2)-2*this.acceleration.y*overiny),this.position.y=height-this.size/2,this.velocity.y=-1*vatheight)},this.bounceEdges=function(){this.position.x<0+this.size/2&&(overinx=this.position.x-this.size/2,vatwidth=Math.sqrt(Math.pow(this.velocity.x,2)-2*this.acceleration.x*overinx),this.velocity.x=1*vatwidth,this.position.x=0+this.size/2),this.position.x>width-this.size/2&&(overinx=this.position.x-width+this.size/2,vatwidth=Math.sqrt(Math.pow(this.velocity.x,2)-2*this.acceleration.x*overinx),this.position.x=width-this.size/2,this.velocity.x=-1*vatwidth),this.position.y<0+this.size/2&&(overiny=this.position.y-this.size/2,vatheight=Math.sqrt(Math.pow(this.velocity.y,2)-2*this.acceleration.y*overiny),this.velocity.y=1*vatheight,this.position.y=0+this.size/2),this.position.y>height-this.size/2&&(overiny=this.position.y-height+this.size/2,vatheight=Math.sqrt(Math.pow(this.velocity.y,2)-2*this.acceleration.y*overiny),this.position.y=height-this.size/2,this.velocity.y=-1*vatheight)},this.towardMouse=function(a){var b=new Vector(mouseX,mouseY),c=Vector.sub(b,this.position);c.normalize(),c.mult(a),this.acceleration=c}};KineticMass.prototype.get=function(){return new KineticMass(this.position,this.velocity,this.acceleration)},KineticMass.get=function(a){return new KineticMass(a.position,a.velocity,a.acceleration)};var Mover=function(a,b,c,d,e,f){this.options=f||{},this.position=new createVector(a.x,a.y),this.velocity=new createVector(b.x,b.y),this.acceleration=new createVector(c.x,c.y),this.limit=20,this.mass=d,this.color=e,this.size=this.mass,this.outline=255,this.tail=!1,this.tailFill="white",this.tailStroke="black",this.tailA=[],this.angle=0,this.aVelocity=0,this.aAcceleration=0,this.update=function(){!0===this.tail&&this.tailA.push(this.position.copy()),this.velocity.add(this.acceleration),this.velocity.limit(this.limit),this.position.add(this.velocity),this.acceleration.mult(0);var a=70;this.tailA.length>a&&(this.tailA=this.tailA.slice(-1*a)),this.aVelocity+=this.aAcceleration,this.angle+=this.aVelocity},this.display=function(){if(fill(this.color),stroke(this.outline),ellipse(this.position.x,this.position.y,this.size,this.size),!0===this.tail){push(),fill(this.tailFill),stroke(this.tailStroke);for(var a=0;a<this.tailA.length;a++)ellipse(this.tailA[a].x,this.tailA[a].y,3,3);pop()}},this.giveItAnAcceleration=function(a){this.acceleration=a},this.applyForce=function(a){var b=a.copy();b.div(this.mass),this.acceleration.add(b)},this.wrapEdges=function(){this.position.x>width?this.position.x=0:this.position.x<0&&(this.position.x=width),this.position.y>height?this.position.y=0:this.position.y<0&&(this.position.y=height)},this.bounceEdges=function(){this.position.x<0+this.size/2&&(this.velocity.x*=-1,this.position.x=0+this.size/2),this.position.x>width-this.size/2&&(this.velocity.x*=-1,this.position.x=width-this.size/2),this.position.y<0+this.size/2&&(this.velocity.y*=-1,this.position.y=0+this.size/2),this.position.y>height-this.size/2&&(this.velocity.y*=-1,this.position.y=height-this.size/2)},this.towardMouse=function(a){var b=new Vector(mouseX,mouseY),c=Vector.sub(b,this.position);c.normalize(),c.mult(a),this.acceleration=c}};Mover.prototype.get=function(){return new Mover(this.position,this.velocity,this.acceleration)},Mover.get=function(a){return new Mover(a.position,a.velocity,a.acceleration)};var movingBackground=function(a,b,c,d,e){if(e=e||{},this.maxUnitHeight=void 0!==e.maxUnitHeight?e.maxUnitHeight:300,this.amountOfBuildings=void 0!==e.amountOfBuildings?e.amountOfBuildings:width/14,this.amountOfClouds=void 0!==e.amountOfClouds?e.amountOfClouds:width/5,this.position=b,this.velocity=c,this.acceleration=d,this.whichKind=a,this.shapes=[],this.avgVel=createVector(0,0),"cityStreet"==this.whichKind)for(noOfBuildings=this.amountOfBuildings,rectMode(CORNERS),i=0;i<noOfBuildings;i++)this.shapes.push(new backgroundShape(this.whichKind,this.velocity,this.maxUnitHeight)),this.shapes[i].position=createVector(-2*width+70*i,this.position.y),this.shapes[i].name="bldg "+i,this.shapes[i].layer=i,this.shapes[i].scale=3;if("clouds"==this.whichKind)for(noOfClouds=this.amountOfClouds,i=0;i<noOfClouds;i++)this.shapes.push(new backgroundShape(this.whichKind,this.velocity)),this.shapes[i].position=createVector(random(-width,2*width),random(-height,2*height)),this.shapes[i].name="cloud "+i,this.shapes[i].layer=i,this.shapes[i].scale=2;this.l=this.shapes.length,this.update=function(){this.oldVelocity=this.velocity,this.velocity.add(this.acceleration),this.avgVel.x=this.oldVelocity.x+.5*this.velocity.x,this.avgVel.y=this.oldVelocity.y+.5*this.velocity.y},this.display=function(){for(i=this.l-1;i>=0;i--)this.shapes[i].run()}},backgroundShape=function(a,b){this.howTall=random(40,this.maxUnitHeight),this.howWide=random(20,100),this.fill=random(60,230),this.whichKind=a,this.avgVel=b,this.run=function(){this.needsMoving(),this.update(),this.position.x<width+100&&this.position.x>-100&&this.position.y>-100&&this.position.y<height+100&&this.display()},this.update=function(){"cityStreet"==this.whichKind?(rectMode(CORNERS),this.position.add(this.avgVel)):"clouds"==this.whichKind&&this.position.add(p5.Vector.mult(this.avgVel,(noOfClouds-this.layer)/noOfClouds))},this.display=function(){"cityStreet"==this.whichKind?(push(),fill(this.fill),noStroke(),rect(this.position.x,this.position.y,this.position.x+this.howWide,this.position.y-this.howTall),pop(),push(),stroke(0),line(0,this.position.y,width,this.position.y),pop()):"clouds"==this.whichKind&&(this.scale=2,push(),fill(this.fill,200),noStroke(),ellipse(this.position.x,this.position.y,this.howWide,this.howWide),pop())},this.needsMoving=function(){this.position.x<-width*(this.scale-1)&&(this.position.x=width*this.scale),this.position.x>width*this.scale&&(this.position.x=-width*(this.scale-1)),this.position.y<-height*(this.scale-1)&&(this.position.y=height*this.scale),this.position.y>height*this.scale&&(this.position.y=-height*(this.scale-1))}},Wheel=function(a,b,c,d){angleMode(RADIANS);var d=d||{};this.x=a,this.y=b,this.r=c/2,this.d=c,this.arrowDecorations=[],this.arrows=[],this.rimColor=color("rgba(0,0,0,1)"),this.spokeColor=color("rgba(0,0,0,1)"),this.wheelColor=color("rgba(0,0,0,.1)"),this.specialEffects=void 0!==d.specialEffects?d.specialEffects:{active:!1,style:"splash"},this.specialEffects.active&&"splash"==this.specialEffects.style&&(this.specialEffects.system=new ParticleSystem(createVector(-this.r/4,this.r))),this.rotate=!1,this.angle=0,this.angularSpeed=0,this.translationalSpeed=0,this.vdecorate=!1,this.cdecorate=!1,this.translation=!1,this.rotation=!1,this.rollingNoSlip=!1;var e=createVector(this.x,this.y),f=createVector(this.x+this.r,this.y-this.r);this.a1=new Arrow(e,f),this.a2=new Arrow(e,f),this.a3=new Arrow(e,f),this.a1.width=10,this.a2.width=10,this.a3.width=10,this.a1.color=color("green"),this.a2.color=color("green"),this.a3.color=color("green"),this.a1.draggable=!1,this.a1.grab=!1,this.a2.draggable=!1,this.a2.grab=!1,this.a3.draggable=!1,this.a3.grab=!1,this.addDecorations=function(a){for(i=0;i<this.arrowDecorations.length;i++)this.arrows[i]=new Arrow(createVector(0,this.arrowDecorations[i].radialLocation*this.r),createVector(25*(this.angularSpeed+this.translationalSpeed)*this.arrowDecorations[i].radialLocation,this.arrowDecorations[i].radialLocation*this.r)),this.arrows[i].color=color("green"),this.arrows[i].width=10,this.arrows[i].draggable=!1,this.arrows[i].grab=!1},this.wrap=function(){this.x-this.r>width&&(this.x=-this.r),this.x+this.r<0&&(this.x=width+this.r)},this.update=function(){this.x+=this.translationalSpeed,this.angularSpeed=this.translationalSpeed/(this.r-.1*this.r)},this.draw=function(){push(),angleMode(RADIANS),translate(this.x,this.y),1==this.specialEffects.active&&(this.specialEffects.system.addParticle(),this.specialEffects.system.display()),1==this.rotate&&(rotate(this.angle),this.angle+=this.angularSpeed),fill(this.wheelColor),stroke(this.rimColor),strokeWeight(.1*this.r),ellipse(0,0,this.d,this.d),stroke(this.spokeColor),strokeWeight(2);for(var a=0;a<16;a++)line(0,0,(this.r-2)*cos(Math.PI/6*a),(this.r-2)*sin(Math.PI/6*a));for(a=0;a<this.arrowDecorations.length;a++)push(),rotate(this.arrowDecorations[a].rimPos),this.arrows[a].target.x=-25*(this.angularSpeed*this.r-this.translationalSpeed*Math.cos(-this.arrowDecorations[a].rimPos+this.angle))*this.arrowDecorations[a].radialLocation,this.arrows[a].target.y=this.arrowDecorations[a].radialLocation*this.r-this.translationalSpeed*Math.sin(-this.arrowDecorations[a].rimPos+this.angle)*25,this.arrows[a].update(),this.arrows[a].display(),pop();1==this.cdecorate&&(stroke(255,0,0),strokeWeight(4),noFill(),arc(0,0,this.d,this.d,0,Math.PI),stroke(0,0,255),arc(0,0,this.d,this.d,Math.PI,2*Math>PI),noStroke(),fill(255,0,0),ellipse(this.r,0,10,10),fill(30,30,255),ellipse(-this.r,0,10,10)),pop(),1==this.vdecorate&&(1==this.rotation&&(this.a1.origin.x=this.x,this.a1.origin.y=this.y-this.r,this.a1.target.x=this.x+25*this.angularSpeed,this.a1.target.y=this.y-this.r,this.a2.origin.x=this.x,this.a2.origin.y=this.y+this.r,this.a2.target.x=this.x-25*this.angularSpeed,this.a2.target.y=this.y+this.r,this.a1.update(),this.a2.update(),this.a1.display(),this.a2.display()),1==this.translation&&(this.a1.origin.x=this.x,this.a1.origin.y=this.y-this.r,this.a1.target.x=this.x+25*this.translationalSpeed,this.a1.target.y=this.y-this.r,this.a2.origin.x=this.x,this.a2.origin.y=this.y,this.a2.target.x=this.x+25*this.translationalSpeed,this.a2.target.y=this.y,this.a3.origin.x=this.x,this.a3.origin.y=this.y+this.r,this.a3.target.x=this.x+25*this.translationalSpeed,this.a3.target.y=this.y+this.r,this.a1.update(),this.a2.update(),this.a3.update(),this.a1.display(),this.a2.display(),this.a3.display()))}};FR=30,Point.prototype.add=function(a,b){this.x+=a,this.y-=b},Point.prototype.fixChoord=function(){this.y>0&&(this.y=-1*this.y)},Point.prototype.invert=function(){this.y*=-1,this.x*=-1},Point.prototype.makePix=function(a,b,c,d){this.fixChoord(),this.x=this.x*c+a,this.y=this.y*d+b},Point.getDist=function(a,b){var c=new Point(0,0);return c.x=Math.abs(a.x-b.x),c.y=Math.abs(a.y-b.y),c},Point.getPoint=function(a){return new Point(a.x,a.y)},Plot.prototype.plot=function(a){fill(this.color),stroke(this.color),strokeWeight(this.weight);for(var b=0;b<this.data.length;b++)b<this.data.length-1&&this.data[b+1].x<=a.tr_pix.x&&this.data[b+1].y>=a.tr_pix.y&&this.data[b].x>=a.bl_pix.x&&this.data[b].y<=a.bl_pix.y&&line(this.data[b].x,this.data[b].y,this.data[b+1].x,this.data[b+1].y),this.data[b].x<=a.tr_pix.x&&this.data[b].y>=a.tr_pix.y&&this.data[b].x>=a.bl_pix.x&&this.data[b].y<=a.bl_pix.y&&ellipse(this.data[b].x,this.data[b].y,this.pointSize,this.pointSize)},Plot.prototype.getUser=function(){for(var a=new Point(0,0),b=new Point(mouseX,mouseY),c=1e5,d=0,e=0;e<this.data.length;e++)a=Point.getDist(b,this.data[e]),c>a.x&&(c=a.x,d=e);this.data[d].y=mouseY},Plot.prototype.tpRecord=function(a,b){this.timeplot=!0;for(var c=b.bl_pix.x,d=b.x_max,e=FR,f=0;f<this.data.length;f++)this.data[f].x-=b.xunit/e;this.data[0]&&this.data[0].x<c&&this.data.splice(0,1);var g=new Point(d,a);this.data.push(g)},Plot.prototype.getPointDist=function(a,b){return dist(this.data[a].x,this.data[a].y,this.data[b].x,this.data[b].y)},Plot.prototype.fixChoord=function(a,b,c){for(var d=Point.getPoint(c),e=0;e<this.data.length;e++)d.add(this.data[e].x*a,this.data[e].y*b),this.data[e].x=d.x,this.data[e].y=d.y,d=Point.getPoint(c)},Graph.prototype.update=function(){},Graph.prototype.set_offset=function(a,b){this.x_offset=a,this.y_offset=b,this.bl_pix=new Point(this.x_offset+.15*this.width,this.y_offset+.85*this.height),this.tr_pix=new Point(this.x_offset+.9*this.width,this.y_offset+.15*this.height),this.bl_val=new Point(this.x_min,this.y_min),this.bl_val.invert(),this.xpix=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/this.resolution,this.ypix=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/this.resolution,this.xunit=dist(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y)/(this.x_max-this.x_min),this.yunit=dist(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y)/(this.y_max-this.y_min),this.origin=Point.getPoint(this.bl_pix),this.origin.add(this.bl_val.x*this.xunit,this.bl_val.y*this.yunit),console.log(this.origin.x,this.origin.y)},Graph.prototype.drawBg=function(a,b){void 0===a&&(a=color(255)),void 0===b&&(b=color(0)),0==this.showBorder?noStroke():(stroke(b),strokeWeight(this.borderWidth)),fill(a),rect(this.x_offset,this.y_offset,this.width,this.height),strokeWeight(1),stroke(0),line(this.bl_pix.x,this.bl_pix.y,this.tr_pix.x,this.bl_pix.y),line(this.bl_pix.x,this.bl_pix.y,this.bl_pix.x,this.tr_pix.y);var c=(this.x_max-this.x_min)/this.resolution,d=(this.y_max-this.y_min)/this.resolution;fill(0),stroke(180);var e=this.x_min,f=0;text(this.x_min,this.bl_pix.x,this.bl_pix.y+20);for(var g=0;g<this.resolution;g++)e+=c,f+=this.xpix,line(this.bl_pix.x+f,this.bl_pix.y+5,this.bl_pix.x+f,this.tr_pix.y),text((Math.round(10*e)/10).toString(),this.bl_pix.x+f,this.bl_pix.y+20);var e=this.y_min,f=0;text(this.y_min,this.bl_pix.x-20,this.bl_pix.y);for(var g=0;g<this.resolution;g++)e+=d,f+=this.ypix,line(this.bl_pix.x-5,this.bl_pix.y-f,this.tr_pix.x,this.bl_pix.y-f),text((Math.round(10*e)/10).toString(),this.bl_pix.x-20,this.bl_pix.y-f);if(1==this.showTitle)if(textSize(16),textAlign(CENTER,CENTER),1!=this.showLegend)text(this.title,this.x_offset+this.width/2,this.y_offset+.07*this.height);else{textSize(16),textAlign(CENTER,CENTER),text(this.title,this.x_offset+this.width/4,this.y_offset+.07*this.height),fill(a),stroke(b);var h=this.y_offset+.02*this.height,i=this.x_offset+this.width/2;rect(i,h,this.width/2.2,.1*this.height),textSize(12),textAlign(LEFT,TOP),noStroke(),fill(0);for(var g=0;g<this.plots.length;g++)text(this.plots[g].plotTitle,i+8,h+2),h+=12}1==this.showLabels&&(textAlign(CENTER,CENTER),textSize(12),text(this.xlabel,this.x_offset+this.width/2,this.y_offset+.97*this.height),push(),translate(this.x_offset+.03*this.width-10,this.y_offset+this.height/2),rotate(-Math.PI/2),text(this.ylabel,0,0),pop())},Graph.prototype.plotAll=function(){for(var a=0;a<this.plots.length;a++){if(1==this.plots[a].timeplot){var b=new Plot;b.data=[],b.data[0]=this.plots[a].data[this.plots[a].data.length-1],b.fixChoord(this.xunit,this.yunit,this.origin),this.plots[a].data[this.plots[a].data.length-1]=b.data[0]}this.plots[a].plot(this)}},Graph.prototype.addPlot=function(a){a.fixChoord(this.xunit,this.yunit,this.origin),this.plots.push(a)},Graph.prototype.getZeroes=function(){},Graph.prototype.getChoord=function(a,b){},Graph.makeData=function(a,b){var c=[];if(a.length==b.length)for(var d=0;d<a.length;d++){var e=new Point(a[d],b[d]);c.push(e)}else console.log("xarray and yarray lengths differ.");return c},Graph.makeUserPlot=function(a,b,c,d,e,f){var g=new Plot;void 0===d&&(d=color(0)),void 0===e&&(e=1),void 0===f&&(f=3),g.lineColor=d,g.data=[],g.weight=e,g.pointSize=f;for(var h=(b-a)/c,i=a;i<b;i+=h){var j=new Point(i,0);g.data.push(j)}return g};var Particle=function(a,b){var b=b||{};this.position=a.copy(),this.acceleration=void 0!==b.acceleration?createVector(b.acceleration.x,b.acceleration.y):createVector(0,.05),this.velocity=void 0!==b.velocity?createVector(random(b.velocity.x1,b.velocity.x2),random(b.velocity.y1,b.velocity.y2)):createVector(random(0,-3),random(0,-4)),this.lifespan=void 0!==b.lifespan?b.lifespan:170,this.particleSize=void 0!==b.particleSize?b.particleSize:{x:5,y:5},this.strokeColor=void 0!==b.strokeColor?b.strokeColor:{r:5,g:5,b:250,a:1},this.strokeWeight=void 0!==b.strokeWeight?b.strokeWeight:1,this.fillColor=void 0!==b.fillColor?b.fillColor:{r:5,g:5,b:250,a:1}};Particle.prototype.run=function(){this.update(),this.display()},Particle.prototype.update=function(){this.velocity.add(this.acceleration),this.position.add(this.velocity),this.lifespan-=2},Particle.prototype.display=function(){stroke(this.strokeColor.r,this.strokeColor.g,this.strokeColor.b,this.strokeColor.a*this.lifespan),strokeWeight(this.strokeWeight),fill(this.fillColor,this.lifespan,.1),fill(this.fillColor.r,this.fillColor.g,this.fillColor.b,this.fillColor.a*this.lifespan),ellipse(this.position.x,this.position.y,this.particleSize.x,this.particleSize.y)},Particle.prototype.isDead=function(){return this.lifespan<0};var ParticleSystem=function(a){this.origin=a.copy(),this.particles=[]};ParticleSystem.prototype.addParticle=function(){this.particles.push(new Particle(this.origin))},ParticleSystem.prototype.display=function(){for(var a=this.particles.length-1;a>=0;a--){var b=this.particles[a];b.run(),b.isDead()&&this.particles.splice(a,1)}},Wave.prototype.calculate=function(){this.dx=TWO_PI/this.wavelength*this.xspacing;var a=this.theta;if("sine"==this.type)for(var b=0;b<this.yvalues.length;b++)this.yvalues[b]=Math.sin(a)*this.amplitude*this.yspacing,a+=this.dx;else if("cosine"==this.type)for(var b=0;b<this.yvalues.length;b++)this.yvalues[b]=Math.cos(a)*this.amplitude*this.yspacing,a+=this.dx;else if("tangent"==this.type)for(var b=0;b<this.yvalues.length;b++)this.yvalues[b]=Math.tan(a)*this.amplitude*this.yspacing,a+=this.dx},Wave.prototype.update=function(){this.dx=TWO_PI/this.wavelength*this.xspacing,this.theta-=this.timestep*this.angularvelocity;var a=this.theta;if("sine"==this.type)for(var b=0;b<this.yvalues.length;b++)this.yvalues[b]=Math.sin(a)*this.amplitude*this.yspacing,a+=this.dx;else if("cosine"==this.type)for(var b=0;b<this.yvalues.length;b++)this.yvalues[b]=Math.cos(a)*this.amplitude*this.yspacing,a+=this.dx;else if("tangent"==this.type)for(var b=0;b<this.yvalues.length;b++)this.yvalues[b]=Math.tan(a)*this.amplitude*this.yspacing,a+=this.dx},Wave.prototype.display=function(){if(this.styles.line.visible){push(),noFill(),strokeWeight(this.styles.line.strokeWeight),stroke(this.styles.line.color),beginShape();for(var a=0;a<this.yvalues.length;a+=2)curveVertex(a*this.xspacing,height/2+this.yvalues[a]);endShape(),pop()}if(this.styles.dots.visible){noStroke();for(var a=2;a<this.yvalues.length-2;a+=2)20==a?this.styles.dots.highLightSpecial&&fill(this.styles.dots.highLightColor):fill(this.styles.dots.color),ellipse(a*this.xspacing,height/2+this.yvalues[a],this.styles.dots.size,this.styles.dots.size)}};var StaticBackground=function(a){this.options=a||{},this.type=void 0!==typeof this.options.type?this.options.type:"basic","basic"==this.type?(this.scenery=new BasicBackground(this.options),this.display=function(){this.scenery.display()}):"grassy"==this.type&&(this.scenery=new GrassyBackground(this.options),this.display=function(){this.scenery.display()})},BasicBackground=function(a){this.options=a||{},this.ground=void 0===this.options.ground?"grey":this.options.ground,this.sky="#F9F6FE",this.rotate=0,this.vanishingPoint=void 0!==typeof this.options.vanishingPoint?this.options.vanishingPoint:.6,this.horizon={x1:0,y1:height*this.vanishingPoint,x2:width,y2:height},this.horizonHighlight=!1,this.horizonHighlightColor="black",this.horizonHighlightWeight=3};BasicBackground.prototype.display=function(){background(this.sky),push(),noStroke(),fill(this.ground),rect(this.horizon.x1,this.horizon.y1,this.horizon.x2,this.horizon.y2),pop(),this.horizonHighlight&&(line(this.horizon.x1,this.horizon.y1,this.horizon.x2,this.horizon.y1),stroke(this.horizonHighlightColor),strokeWeight(this.horizonHighlightWeight))},GrassyBackground.prototype=Object.create(BasicBackground.prototype);